\documentclass{ximera}

\input{../preamble.tex}

\outcome{Identify products of functions.}
\outcome{Use the product rule to calculate derivatives.}
\outcome{Identify quotients of functions.}
\outcome{Use the quotient rule to calculate derivatives.}
\outcome{Combine derivative rules to take derivatives of more complicated functions.}
\outcome{Explain the signs of the terms in the numerator of the quotient rule.}
\outcome{Multiply tangent lines to justify the product rule.}
\outcome{Use the product and quotient rule to calculate derivatives from a table of values.}

\title[Dig-In:]{The Product rule and quotient rule}

\begin{document}
\begin{abstract}
Here we compute derivatives of products and quotients of functions
\end{abstract}
\maketitle


\section{The product rule}


Consider the product of two simple functions, say
\[
f(x)\cdot g(x)
\]
where $f(x)=x^2+1$ and $g(x)=x^3-3x$. An obvious guess for the
derivative of $f(x)g(x)$ is the product of the derivatives:
\begin{align*}
	f'(x)g'(x) &= (2x)(3x^2-3)\\
		&= 6x^3-6x.
\end{align*}
Is this guess correct? We can check by rewriting $f$ and $g$ and doing
the calculation in a way that is known to work. Write with me
\begin{align*}
	f(x)g(x) &= (x^2+1)(x^3-3x)\\
		&=x^5-3x^3+x^3-3x\\
		&=x^5-2x^3-3x.
\end{align*} 
Hence
\[ \ddx f(x) g(x) = \ddx(x^5 - 2x^3 - 3x) = 5x^4-6x^2-3,  \]
so we see that 
\[ \ddx f(x) g(x) \ne  f'(x)g'(x). \]
So the derivative of $f(x)g(x)$ is \textbf{not} as simple as
$f'(x)g'(x)$. Never fear, we have a rule for exactly this situation.

\begin{theorem}[The product rule]\index{derivative rules!product}\index{product rule}\label{theorem:product-rule}
	If $f$ and $g$ are differentiable, then
	\[ \ddx f(x)g(x) = f(x)g'(x)+f'(x)g(x).\]
\end{theorem}

%% \begin{image}
%% \begin{tikzpicture}
%% 	\begin{axis}[
%%             clip=false,
%%             domain=1.5:6, 
%%             ytickmin=1,ytickmax=0,
%%             xtick={4},ytickmin=1,ytickmax=0,
%%             xticklabels={$a$},
%%             ymin=0, ymax=6,
%%             xlabel=$x$, ylabel=$y$,
%%             axis lines=center,
%%             every axis y label/.style={at=(current axis.above origin),anchor=south},
%%             every axis x label/.style={at=(current axis.right of origin),anchor=west},
%%             axis on top,
%%           ]          
%%           %\addplot [dashed, textColor] plot coordinates {(4,0) (4,3.08)};
%%           %\node at (axis cs:4,0) [anchor=north] {$x$};

%%           \addplot [penColor5,very thick] plot coordinates {(5,1.4) (5,1.9)};
%%           \addplot [dashed, very thick, textColor] plot coordinates {(4,1.4) (5,1.4)};

%%           \addplot [penColor4,very thick] plot coordinates {(5,2.2) (5,2.6)};
%%           \addplot [dashed, very thick, textColor] plot coordinates {(4,2.2) (5,2.2)};

%%           \addplot [very thick, penColor5!50!penColor2] plot coordinates {(5,3.08) (5,4.18)};
%%           \addplot [very thick, penColor4!50!penColor] plot coordinates {(5,4.18) (5,4.74)};
%%           \addplot [dashed, very thick, textColor] plot coordinates {(4,3.08) (5,3.08)};
        
%%           \addplot [very thick,penColor,smooth] {-.6+.5*x};
%%           \addplot [very thick,penColor2,smooth] {.6+.4*x};         
%%           \addplot [very thick,penColor3,smooth,domain=1:5.5] {-.36+.06*x+.2*x^2};      
%%           \addplot [penColor3!70!background,smooth, domain=1.6:5.6] {-3.56+1.66*x};      
          
%%           \addplot [dashed, textColor] plot coordinates {(4,0) (4,3.08)};

%%           \node at (axis cs:3.5,1.1) [anchor=north,penColor] {$f(x)$};
%%           \node at (axis cs:2,1.95) [anchor=north,penColor2] {$g(x)$};
%%           \node at (axis cs:4.7,4.3) [anchor=east,penColor3] {$f(x)g(x)$};

%%           \node at (axis cs:5,3.91) [anchor=west] {${\color{penColor}f(a)}{\color{penColor4}g'(a)h}+{\color{penColor5}f'(a)h}{\color{penColor2}g(a)} + {\color{penColor5}f'(a)h}{\color{penColor4}g'(a)h}$};
%%           \node at (axis cs:5,1.65) [anchor=west,penColor5] {$f'(a)h$};
%%           \node at (axis cs:5,2.4) [anchor=west,penColor4] {$g'(a)h$};
%%           \node at (axis cs:4.5,1.5) [anchor=north] {$\underbrace{\hspace{.40in}}_{h}$};

%%           \addplot[color=penColor,fill=penColor,only marks,mark=*] coordinates{(4,1.4)};  %% closed hole          
%%           \addplot[color=penColor2,fill=penColor2,only marks,mark=*] coordinates{(4,2.2)};  %% closed hole          
%%           \addplot[color=penColor3,fill=penColor3,only marks,mark=*] coordinates{(4,3.08)};  %% closed hole          
%%         \end{axis}
%% \end{tikzpicture}
%% %% \caption[A geometric interpretation of the product rule.]{A geometric interpretation of the product rule. Since every
%% %%   point on $f(x)g(x)$ is the product of the corresponding points on
%% %%   $f(x)$ and $g(x)$, increasing $a$ by a ``small amount'' $h$,
%% %%   increases $f(a)g(a)$ by the sum of $f(a)g'(a)h$ and
%% %%   $f'(a)hg(a)$. Hence,
%% %% \begin{align*}
%% %% \frac{\Delta y}{\Delta x} &\approx \frac{f(a)g'(a)h+f'(a)g(a)h + f'(a)g'(a)h^2}{h}\\
%% %% &\approx f(a)g'(a) + f'(a)g(a).
%% %% \end{align*}}
%% \end{image}

%% \begin{explanation}
%% From the limit definition of the derivative, write
%% \[
%% \ddx (f(x)g(x)) = \lim_{h \to0} \frac{f(\answer[given]{x+h})g(\answer[given]{x+h}) - f(\answer[given]{x})g(\answer[given]{x})}{\answer[given]{h}}
%% \]
%% Now we use a trick, we add $0 = -f(x+h)g(x) + f(x+h)g(x)$:
%% \begin{align*}
%% &=\lim_{h \to0} \frac{f(x+h)g(x+h){\color{penColor2}-f(x+h)g(x) + f(x+h)g(x)}- f(x)g(x)}{h} \\ 
%% &=\lim_{h \to0} \frac{f(x+h)g(x+h)-f(x+h)g(x)}{h} + \lim_{h \to0} \frac{f(x+h)g(x)- f(x)g(x)}{h}.
%% \end{align*}
%% Since both $f(x)$ and $g(x)$ are differentiable, they are
%% continuous, see Theorem~\ref{theorem:diff-cont}. Hence
%% \begin{align*}
%% &=\lim_{h \to0} \left(f(x+h)\frac{g(x+h)-g(x)}{h}\right) + \lim_{h \to0} \left(\frac{f(x+h)- f(x)}{h}g(x)\right) \\ 
%% &=\lim_{h \to0} f(x+h)\lim_{h \to0}\cdot \frac{g(x+h)-g(x)}{h} + \lim_{h \to0} \frac{f(x+h)- f(x)}{h} \cdot \lim_{h \to0}g(x) \\ 
%% &=f(x)g'(x) + f'(x)g(x).
%% \end{align*}
%% \end{explanation}



Let's return to the example with which we started.
\begin{example} 
	Let $f(x)=(x^2+1)$ and $g(x)=(x^3-3x)$. Compute:
	\[ \ddx f(x)g(x)\]
	
	\begin{explanation}
		Write with me
		\begin{align*}
			\ddx f(x)g(x) &= f(x)g'(x) + f'(x)g(x)\\
				&=(x^2+1)(\answer[given]{3x^2-3}) + (\answer[given]{2x})(x^3-3x).
		\end{align*}
		We could stop here, but we should show that expanding this out recovers
		our previous result. Write with me
		\begin{align*}
			(x^2+1)&(3x^2-3) + 2x(x^3-3x)\\
				&= 3x^4-3x^2 +3x^2 -3 + 2x^4-6x^2\\
				&=\answer[given]{5x^4-6x^2-3},
		\end{align*}
		which is precisely what we obtained before.
	\end{explanation}
\end{example}



\begin{example} 
	Compute: 
	\[\ddx(xe^x-e^x) \]
	\begin{explanation}
		Using the sum rule and the product rule, write with me
		\begin{align*}
			\ddx \left(xe^x-e^x \right) &=\ddx \left(xe^x\right)-\ddx e^x\\
				&=(xe^x+e^x)-e^x\\
				&=\answer[given]{x e^x}.
		\end{align*}
	\end{explanation}
\end{example}

Now that we are pros, let's try one more example.

\begin{example}
	Suppose $f$ is a function whose values are given in the following table.
	\begin{center}
		\begin{tabular}{c c c}
			\hline \hline
			x & f(x) & f'(x) \\ 
			\hline
			1 & -3 & 4\\
			2 & 5 & -1\\
			3 & 2 & 0\\
			\hline
		\end{tabular}		
	\end{center}
		
	Compute $\eval{ \ddx\left( (x^2+1) f(x) \right)}_{x=2}$.
	\begin{explanation}
	Using the product rule, write with me.
	\begin{align*}
		\ddx\left( (x^2+1) f(x) \right) &= \ddx \left( \answer[given]{x^2+1} \right) \cdot f(x) + (x^2+1) \cdot \ddx\left( \answer[given]{f(x)} \right) \\
			&= \left( \answer[given]{2x} \right) \cdot f(x) + (x^2+1) \cdot \ddx \left( f(x) \right)
	\end{align*}
	
	Plugging in $x=2$ yields:
	\begin{align*}
		\eval{ \ddx\left( (x^2+1) f(x) \right) }_{x=2} &= \left( \answer[given]{4} \right) \cdot f\left( \answer[given]{2} \right) + \left( \answer[given]{5} \right) \cdot f'\left( \answer[given]{2} \right)\\	
			&= 4 \cdot \answer[given]{5} + 5 \cdot \answer[given]{-1}\\
			&= \answer[given]{15}
	\end{align*}
	\end{explanation}
\end{example}

\section{The quotient rule}


We'd like to have a formula to compute
\[ \ddx \frac{f(x)}{g(x)}\]
 This brings us to our next derivative rule.

\begin{theorem}[The quotient rule]\index{derivative rules!quotient}\index{quotient rule}\label{theorem:quotient-rule}
	If $f$ and $g$ are differentiable, then
	\[ \ddx \frac{f(x)}{g(x)} = \frac{f'(x)g(x)-f(x)g'(x)}{g(x)^2}. \]
\end{theorem}
%% \begin{explanation}
%% First note that if we knew how to compute
%% \[
%% \ddx \frac{1}{g(x)}
%% \]
%% then we could use the product rule to complete our explanation.  Write
%% \begin{align*}
%% \ddx\frac{1}{g(x)}&=\lim_{h\to0} \frac{\frac{1}{g(x+h)}-\frac{1}{g(x)}}{h} \\
%% &=\lim_{h\to0} \frac{\frac{g(\answer[given]{x})-g(\answer[given]{x+h})}{g(x+h)g(x)}}{h} \\
%% &=\lim_{h\to0} \frac{g(x)-g(x+h)}{g(x+h)g(x)h} \\
%% &=\lim_{h\to0} -\frac{g(x+h)-g(x)}{h} \frac{1}{g(x+h)g(x)} \\
%% &=-\frac{g'(x)}{g(x)^2}.
%% \end{align*}
%% Now we can put this together with the product rule:
%% \begin{align*}
%% \ddx\frac{f(x)}{g(x)} &=f(x)\frac{-g'(x)}{g(x)^2}+f'(x)\frac{1}{g(x)}\\
%% &=\frac{-f(x)g'(x)+f'(x)g(x)}{g(x)^2}\\
%% &=\frac{f'(x)g(x)-f(x)g'(x)}{g(x)^2}.
%% \end{align*}

%% \end{explanation}


\begin{example}
	Compute:
	\[ \ddx \frac{x^2+1}{x^3-3x}\]
	
	\begin{explanation}
		Write with me
		\begin{align*}
			\ddx \frac{x^2+1}{x^3-3x} 
				&= \frac{2x(\answer[given]{x^3-3x})-(\answer[given]{x^2+1})(3x^2-3)}{(\answer[given]{x^3-3x})^2}\\
				&=\frac{-x^4-6x^2+3}{(\answer[given]{x^3-3x})^2}.
		\end{align*}
	\end{explanation}
\end{example}


\begin{example}
	Compute:
	\[\ddx \frac{\sin(x)}{x} \]
	
	\begin{explanation}
		Write with me
		\[\ddx \frac{\sin(x)}{x} =  \frac{\cos(x)\cdot x-\sin(x)\cdot1}{x^2}.\]
	\end{explanation}
\end{example}

It is often possible to calculate derivatives in more than one way, as
we have already seen. Since every quotient can be written as a
product, it is always possible to use the product rule to compute the
derivative, though it is not always simpler.

\begin{example}
	Compute: 
	\[ \ddx \frac{625-x^2}{\sqrt{x}} \] 
	in two ways. First using the quotient rule and then using the product rule.
	\begin{explanation}
		First, we'll compute the derivative using the quotient rule. Write with me
		\[ \ddx \frac{625-x^2}{\sqrt{x}} = \frac{\left(-2x\right)\left(\answer[given]{\sqrt{x}}\right) - (\answer[given]{625-x^2})\left(\frac{1}{2}x^{-1/2}\right)}{\answer[given]{x}}. \]
		
		Second, we'll compute the derivative using the product rule:
		\begin{align*}
			\ddx \frac{625-x^2}{\sqrt{x}} &= \ddx \left(625-x^2\right)x^{-1/2}\\
				=\left(625-x^2\right)&\left(\answer[given]{\frac{-x^{-3/2}}{2}}\right)+ (\answer[given]{-2x})\left(x^{-1/2}\right).
		\end{align*}
		With a bit of algebra, both of these simplify to
		\[ -\frac{3x^2+625}{2x^{3/2}}.\]
	\end{explanation}
\end{example}


\begin{example}
	Suppose we have two functions, $f$, and $g$, and we know that $f(4) = 3$, $f'(4) = 5$, $g(4) = -2$, and $g'(4) = 2$.
	What is the slope of the tangent line to the curve $y=\frac{f(x)}{g(x)}$ at the point where $x = 4$?
	\begin{explanation}
		The slope of the tangent line to the curve  $y=\frac{f(x)}{g(x)}$ at $x = 4$ is given by $ \eval{\ddx\frac{f(x)}{g(x)}}_{x=4}$.
	 
		  By the QuotientRule, this derivative is given by 
		 \begin{align*}
			\eval{\ddx\frac{f(x)}{g(x)}}_{x=4} &=\eval{\frac{f'(x)g(x)-f(x)g'(x)}{\left(g(x)\right)^2}}_{x=4}\\
				&=\frac{f'(4)g(4)-f(4)g'(4)}{\left(g(4)\right)^2}\\
				&=\frac{5(-2)-3\cdot2}{\left(-2\right)^2}\\
				&=\frac{-10-6}{4}\\
				&=-4
		\end{align*}
	\end{explanation}
\end{example} 


\begin{example}
	Suppose we have two functions, $f$, and $g$, and we know that $f(4) = 3$, $f'(4) = 5$, $g(4) = -2$, and $g'(4) = 2$.
	What is the slope of the tangent line to the curve $y=\frac{xf(x)}{g(x)}$ at the point where $x = 4$?
	\begin{explanation}
		The slope of the tangent line to the curve  $y=\frac{xf(x)}{g(x)}$ at $x = 4$ is given by $ \eval{\ddx\frac{xf(x)}{g(x)}}_{x=4}$.
	 
		By the QuotientRule and the Product Rule, this derivative is given by 
		\begin{align*}
			\eval{\ddx\frac{xf(x)}{g(x)}}_{x=4} &=\eval{\frac{(xf'(x)+f(x))g(x)-xf(x)g'(x)}{\left(g(x)\right)^2}}_{x=4}\\
				&=\frac{(4f'(4)+f(4))g(4)-4f(4)g'(4)}{\left(g(4)\right)^2}\\
				&=\frac{(4\cdot5+3)(-2)-4\cdot3\cdot2}{\left(-2\right)^2}\\
				&=\frac{(4\cdot5+3)(-2)-4\cdot3\cdot2}{\left(-2\right)^2}\\
				&=\frac{-35}{2}\\
		\end{align*}
	\end{explanation}
\end{example} 


\begin{example}
	Compute:
	\[\ddx \frac{e^x \sin(x)}{(x^2+1)(x-3)} \]
	
	\begin{explanation}
		This one is a bit more involved than the previous examples. We'll work through it step-by-step. The first step will be to setup the 
		quotient rule and to notice that both the numerator and denominator in the original function are products.
		\begin{align*}
			\ddx&\frac{e^x \sin(x)}{(x^2+1)(x-3)} = \dfrac{\left(e^x \sin(x)\right)'\left((x^2+1)(x-3)\right) - \left(e^x \sin(x)\right)\left((x^2+1)(x-3)\right)' }{\left((x^2+1)(x-3)\right)^2} \\
			=& \dfrac{\left((e^x)' \sin(x)+e^x(\sin(x))'\right)\left((x^2+1)(x-3)\right) - \left(e^x \sin(x)\right)\left((x^2+1)'(x-3)+(x^2+1)(x-3)'\right) }{\left((x^2+1)(x-3)\right)^2} \\
			=& \dfrac{\left(e^x \sin(x)+e^x\cos(x)\right)\left((x^2+1)(x-3)\right) - \left(e^x \sin(x)\right)\left(2x(x-3)+(x^2+1)\cdot 1\right) }{\left((x^2+1)(x-3)\right)^2}
		\end{align*}
	\end{explanation}
\end{example}

Let's finish up with one more, mixing the rules together.
\begin{example}
	Suppose $f$ is a function whose values are given in the following table.
	\begin{center}
		\begin{tabular}{c c c}
			\hline \hline
			x & f(x) & f'(x) \\ 
			\hline
			1 & -3 & 4\\
			2 & 5 & -1\\
			3 & 2 & 0\\
			\hline
		\end{tabular}		
	\end{center}
		
	Compute $\eval{ \ddx\left( \frac{x f(x)}{x+1} \right)}_{x=2}$.
	\begin{explanation}
		The `Outside Operation' is a quotient, so we'll start with the quotient rule.  Notice that the numerator is a product?  That means we'll have to use product rule, too.
		\begin{align*}
			\ddx\left( \frac{x f(x)}{x+1} \right) &= \frac{\ddx\left(x f(x)\right) \left(\answer[given]{x+1}\right) - \left( x f(x) \right) \ddx \left(x+1\right)}{\answer[given]{(x+1)^2}}\\
				&= \frac{\left( \ddx(x) f(x) + x\ddx\left(f(x)\right) \right) (x+1) - \left( x f(x) \right) \left( \answer[given]{1}\right)}{(x+1)^2}\\
				&= \frac{\left( f(x) + x f'(x) \right) (x+1) - x f(x)}{(x+1)^2}		
		\end{align*}
		
		Plugging $x=2$ into this yields:
		\begin{align*}
			\eval{ \ddx\left( \frac{x f(x)}{x+1} \right)}_{x=2} 
				&= \frac{\left( f\left(\answer[given]{2}\right) + 2 f'\left(\answer[given]{2}\right) \right) \left(\answer[given]{3}\right) - \answer[given]{2} f\left(\answer[given]{2}\right)}{\answer[given]{9}} \\
				&= \frac{\left( 5 + 2 (\answer[given]{-1})\right) (3) - 2 (5)}{9} \\
				&= \answer[given]{\frac{-1}{9}}
		\end{align*}
	\end{explanation}
\end{example}

\end{document}
